# Веб-приложение для менеджеров по работе с клиентами банка
---

## Обзор  

Данное веб-приложение предназначено для сотрудников банка, ведущих непосредственную работу с клиентами. С его помощью
сотрудники могут оказывать следующие услуги клиентам:
- Регистрация новых клиентов в банке;
- Изменение персональных данных клиентов;
- Открытие новых банковских счетов для клиентов;
- Пополнение банковских счетов клиентов;
- Снятие денег с банковских счетов клиентов;
- Закрытие существующих банковских счетов клиентов;
- Прекращение клиентских отношений с банком.

Веб-приложение доступно локально по следующему URL: http://localhost:8080/api/clients.  

## Стек технологий  

В разработке приложения используются следующие технологии:
- Java 17
- Spring Boot 3.1.4:
- - Spring Boot Starter Parent
- - Spring Boot Starter Data JPA
- - Spring Boot Starter Thymeleaf
- - Spring Boot Starter Validation
- - Spring Boot Starter Web
- - Spring Boot Starter Test
- Apache Maven (сборщик проекта)
- PostgreSQL (реляционная база данных)
- Project Lombok (библиотека для упрощения Java-кода)
- ModelMapper (библиотека для маппинга объектов)
- HTML (для представления веб-страниц)
- Bootstrap 5 (CSS и JavaScript библиотека для веб-дизайна)  

## Подключение к базе данных и её ER–модель  

Для настройки подключения к базе данных необходимо указать параметры в файле 
[application.properties](https://github.com/MicCchaelS/bank-web-app/blob/master/src/main/resources/application.properties).  
История изменений базы данных представлена в пакете 
[db.changelog](https://github.com/MicCchaelS/bank-web-app/tree/master/src/main/resources/db.changelog).  
Ниже представлена ER-модель ("сущность-связь") использованной мною базы данных PostgreSQL:  

![ER-модель базы данных](https://github.com/MicCchaelS/bank-web-app/blob/master/images/database-ER-model.jpg?raw=true)  

## Результаты работы веб-приложения  

### Список клиентов банка  

Главной страницей веб-приложения является список клиентов банка. Она доступна по URL: http://localhost:8080/api/clients
и имеет следующий вид:  

![Список клиентов](https://github.com/MicCchaelS/bank-web-app/blob/master/images/clients-list.jpg?raw=true)  

Если список клиентов пуст, то страница будет выглядеть следующим образом:  

![Пустой список клиентов](https://github.com/MicCchaelS/bank-web-app/blob/master/images/empty-clients-list.jpg?raw=true)  

Также на эту страницу можно перейти, нажав на кнопку "Список клиентов" в навигационной панели на любой 
другой странице.  

### Добавление нового клиента  

Чтобы добавить нового клиента, нажмите на кнопку "Добавить клиента" на странице списка клиентов. После этого произойдет
переход по следующему URL: http://localhost:8080/api/clients/new, открыв страницу добавления нового клиента:  

![Добавление нового клиента 1](https://github.com/MicCchaelS/bank-web-app/blob/master/images/new-client-adding-1.jpg?raw=true)
![Добавление нового клиента 2](https://github.com/MicCchaelS/bank-web-app/blob/master/images/new-client-adding-2.jpg?raw=true)  

Для добавления клиента нажмите кнопку "Создать". Если данные введены корректно, произойдет перенаправление на страницу
с новосозданным клиентом. В противном случае на этой же странице будут предоставлены пояснения о том, что нужно
исправить.  

### Информация о клиенте  

Для просмотра подробной информации о клиенте, нажмите кнопку "Подробнее" на странице списка клиентов в строке таблицы, 
соответствующей этому клиенту. Затем произойдет переход по следующему URL: http://localhost:8080/api/clients/{id} (где 
{id} - уникальный числовой идентификатор клиента). Также на эту страницу можно попасть после создания клиента. Внизу 
страницы находятся кнопки для перехода к банковским счетам клиента, редактирования информации о клиенте и удаления 
клиента, если клиент больше не хочет быть клиентом банка. Эта страница выглядит следующим образом:  

![Информация о клиенте 1](https://github.com/MicCchaelS/bank-web-app/blob/master/images/client-1.jpg?raw=true)
![Информация о клиенте 2](https://github.com/MicCchaelS/bank-web-app/blob/master/images/client-2.jpg?raw=true)  

### Редактирование данных клиента  

Для редактирования данных клиента, нажмите кнопку "Редактировать данные" на странице с информацией о клиенте. Затем 
произойдет переход по следующему URL: http://localhost:8080/api/clients/{id}/edit на страницу редактирования данных 
клиента:  

![Редактирование данных клиента 1](https://github.com/MicCchaelS/bank-web-app/blob/master/images/client-editing-1.jpg?raw=true)
![Редактирование данных клиента 2](https://github.com/MicCchaelS/bank-web-app/blob/master/images/client-editing-2.jpg?raw=true)  

После нажатия кнопки "Сохранить изменения", если данные введены корректно, произойдет перенаправление на страницу с 
обновленной информацией о клиенте. В случае некорректного ввода данных, на той же странице будут указания о 
необходимости соответствующих исправлений.  

### Удаление клиента  

Для удаления клиента, нажмите кнопку "Удалить клиента" на странице с информацией о клиенте. Затем откроется 
предупреждающее окно:  

![Удаление клиента](https://github.com/MicCchaelS/bank-web-app/blob/master/images/client-deleting.jpg?raw=true)  

Если пользователь уверен и нажмет кнопку "Удалить" на этом окне, вся информация о клиенте и его банковских счетах будет 
удалена, и откроется страница со списком клиентов. Операция будет выполнена только в том случае, если клиент 
предварительно закрыл все свои банковские счета. В противном случае удаление не произойдет, и будет выведено сообщение 
об ошибке:  

![Ошибка удаления клиента](https://github.com/MicCchaelS/bank-web-app/blob/master/images/client-deletion-error.jpg?raw=true)  

### Банковские счета клиента  

Для просмотра списка банковских счетов клиента, нажмите кнопку "Банковские счета клиента" на странице с информацией о 
клиенте. Затем произойдет переход по следующему URL: http://localhost:8080/api/clients/{id}/accounts, и откроется 
страница со списком банковских счетов клиента:  

![Список банковских счетов клиента](https://github.com/MicCchaelS/bank-web-app/blob/master/images/bank-accounts-list.jpg?raw=true)  

Если список банковских счетов клиента пуст, страница будет выглядеть следующим образом:  

![Пустой список банковских счетов клиента](https://github.com/MicCchaelS/bank-web-app/blob/master/images/empty-bank-accounts-list.jpg?raw=true)  

### Открытия нового банковского счёта  

Для открытия нового банковского счёта, нажмите кнопку "Создать новый счёт" на странице списка банковских счетов. Это 
автоматически генерирует уникальный номер счёта и происходит переход на страницу новосозданного счёта по следующему 
URL: http://localhost:8080/api/clients/{clientId}/accounts/{accountId} (где {accountId} - уникальный числовой 
идентификатор банковского счёта).  

### Банковский счёт клиента  

Для открытия страницы с информацией о конкретном банковском счёте, нажмите кнопку "Подробнее" на странице списка 
банковских счетов клиента в строке таблицы, соответствующей этому клиенту. После нажатия происходит перенаправление по 
следующему URL: http://localhost:8080/api/clients/{clientId}/accounts/{accountId}, и страница отображает следующее:  

![Банковский счёт](https://github.com/MicCchaelS/bank-web-app/blob/master/images/bank-account.jpg?raw=true)  

Также на эту страницу пользователь перенаправляется при создании нового банковского счёта. Здесь есть кнопки для 
перехода к пополнению счёта, снятию денег со счёта и закрытию счёта.  

### Пополнение банковского счёта  

Для пополнения банковского счёта, нажмите кнопку "Пополнить счёт" на странице этого счёта, после чего происходит 
перенаправление по следующему URL: http://localhost:8080/api/clients/{clientId}/accounts/{accountId}/top-up, и страница
отображается следующим образом:  

![Пополнение банковского счёта](https://github.com/MicCchaelS/bank-web-app/blob/master/images/bank-account-replenishing.jpg?raw=true)  

Здесь пользователь должен указать сумму, которую нужно зачислить на баланс счёта, и нажать кнопку "Пополнить", чтобы 
выполнить операцию. Значение, введённое пользователем, строго проверяется на валидность. В случае некорректного 
значения операция не будет выполнена, и будет выведено соответствующее сообщение об ошибке.  

### Снятие денег с банковского счёта  

Для снятия денег с банковского счёта, нажмите кнопку "Снять деньги со счёта" на странице этого счёта, после чего 
происходит перенаправление по следующему URL: 
http://localhost:8080/api/clients/{clientId}/accounts/{accountId}/withdraw, и страница отображает следующее:  

![Снятие денег с банковского счёта](https://github.com/MicCchaelS/bank-web-app/blob/master/images/bank-account-withdrawing-money.jpg?raw=true)  

Здесь пользователь должен указать сумму, которую нужно списать со счёта, и нажать кнопку "Снять", чтобы выполнить 
операцию. Аналогично, введенное пользователем значение строго проверяется на валидность. В случае некорректного 
значения операция не будет выполнена, и будет выведено соответствующее сообщение об ошибке.  

### Закрытие банковского счёта  

Для закрытия банковского счёта, нажмите кнопку "Закрыть счёт" на странице этого счёта. После этого откроется следующее 
предупреждающее окно:  

![Закрытие банковского счёта](https://github.com/MicCchaelS/bank-web-app/blob/master/images/bank-account-closing.jpg?raw=true)  

Если пользователь уверен и кнопка была нажата не случайно, то далее на этом окне следует нажать на кнопку "Закрыть 
счёт", после чего счёт будет закрыт, и откроется страница со списком банковских счетов. Операция закрытия счёта будет 
выполнена только в том случае, если клиент перед этим снял все деньги со счёта. В противном случае закрытие этого счёта 
не произойдёт, и будет выведено соответствующее сообщение об ошибке:  

![Ошибка закрытия банковского счёта](https://github.com/MicCchaelS/bank-web-app/blob/master/images/bank-account-closing-error.jpg?raw=true)  

Если счёт был успешно закрыт, то при открытии страницы с информацией о нём кнопки с различными операциями будут 
недоступны, и страница будет иметь следующий вид:  

![Закрытый банковский счёт](https://github.com/MicCchaelS/bank-web-app/blob/master/images/closed-bank-account.jpg?raw=true)  

### История операций на банковском счёте  

Все операции, выполняемые пользователем на банковском счёте, сохраняются в базу данных в соответствующую таблицу. В ней 
указывается тип операции (создание счёта, пополнение, списание или закрытие счёта), дата и время выполнения операции, 
сумма пополнения или списания, остаток на счёте после выполнения операции и уникальный числовой идентификатор 
банковского счёта, которому принадлежит та или иная операция:  

![История операций на банковском счёте](https://github.com/MicCchaelS/bank-web-app/blob/master/images/bank-account-actions-history.jpg?raw=true)  

### Валидация введённых данных  

На каждой странице, где пользователь может вводить какие-то данные, эти данные тщательно валидируются, и в случае 
неверного введенного значения возвращается сообщение с указанием того, что и где следует исправить. Вот пример 
некорректно введенных данных о клиенте и соответствующих сообщений об ошибках:  

![Валидация данных клиента 1](https://github.com/MicCchaelS/bank-web-app/blob/master/images/client-validation-1.jpg?raw=true)
![Валидация данных клиента 2](https://github.com/MicCchaelS/bank-web-app/blob/master/images/client-validation-2.jpg?raw=true)  

### Ошибка "Ресурс не найден"  

Если произойдет какая-то ошибка, и будет указан несуществующий идентификатор клиента или банковского счёта, или же 
пользователь сам укажет его в URL, то откроется страница с соответствующим сообщением об ошибке. Пример попытки
открыть несуществующего клиента:  

![Ошибка клиент не найден](https://github.com/MicCchaelS/bank-web-app/blob/master/images/client-not-found-error.jpg?raw=true)  
